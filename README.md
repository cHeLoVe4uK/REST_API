# Суть приложения
Проект является RestAPI сервером, предоставляющим функционал CRUD, для работы с информацией о странах, опираясь на их IATA в формате ISO 3166-1 (двухбуквенная).

Приложение взаимодействует с БД (в нашем случае Postgres и Redis), так же в нем представлена работа с InMemory Cache, со сторонним API DaData, а так же система graceful shutdown.

Приложение позволяет создавать, обновлять, получать и удалять гайды по странам (можно иметь лишь один гайд для страны).
Так же есть возможность получить информацию о стране и гайд к ней (если таковой имеется).

## Как работать с приложением (запросы, которые поддерживает):
1. `http://localhost:8080/guide/:iata`- получение гайда (если таковой имеется в нашей БД) о стране по ее IATA ( IATA может быть написан как строчными, так и прописными буквами)
Вместо localhost будет использоваться другое доменное имя или IP адрес в случае развертывания приложения на удаленном сервере.
Этот запрос поддерживает такие HTTP методы, как: GET, POST, PUT, DELETE

    Пример запроса:

    `http://localhost:8080/guide/au` - получение гайда о стране (в данном случае Австралия)
    ### В случае использования методов POST и PUT следует предоставить в теле запроса json следующего формата:
    ```bash
    {
        # IATA странны, по которой будет создаваться или обновляться гайд
        "iata": "au",
        # наименование гайда
        "title": "Австралия, как место обитания самых жутких существ",
        # автор гайда
        "author": "Тот, кто никогда бы не хотел оказаться в Австралии",
        # ну и сам гайд, то бишь его содержание
        "content": "Вы видели вообще когда-нибудь воронкового паука?" 
    }
    ```

2. `http://localhost:8080/info/:iata` - получение информации о стране и гайда к ней (если таковой имеется в нашей БД) по ее IATA ( IATA может быть написан как строчными, так и прописными буквами).
Вместо localhost будет использоваться другое доменное имя или IP адрес в случае развертывания приложения на удаленном сервере.
Этот запрос поддерживает только HTTP метод: GET
    
    Пример запроса:

    `http://localhost:8080/guide/a`u - получение информации о стране и гайда к ней (в данном случае Австралия)

3. `http://localhost:8080/guides` - получение всех гайдов, имеющихся в БД
Вместо localhost будет использоваться другое доменное имя или IP адрес в случае развертывания приложения на удаленном сервере.
Этот запрос поддерживает только HTTP метод: GET


## Информация для разработчиков:
Для запуска у себя приложния, вы должны указать в командной строке аргумент -path, который представляет собой путь до файла с конфигурацией в формате .toml и именем api.
По умолчанию будет использоваться путь configs/api.toml

## Конфигурационный файл должен иметь следующий вид:
```bash
# Данные по порту, на котором будет работать сервер, и "уровню" логгера для нашего приложения:
bind_addr="8080"
logger_level=-4

# Данные для работы с БД:
database_uri="host=localhost port=5432 user=your_user_name password=your_password dbname=your_db_name sslmode=disable"
driver_name="postgres"
table_name="guides"

# Данные для работы со сторонним API:
api_key="DaData_API_KEY"
secret_key="DaData_SECRET_KEY"

# Данные для Redis:
redis_addr="localhost:6379"
redis_password="your_redis_password"
```

## Так же в проекте можно накатывать и откатывать миграции БД, если они у вас поддерживаются, командами:
```bash
migrate -path <path_to_dir_with_migrations> -database "postgres://localhost:5432/your_db_name?sslmode=disable&user=your_user_name&password=your_password" up

migrate -path <path_to_dir_with_migrations> -database "postgres://localhost:5432/your_db_name?sslmode=disable&user=your_user_name&password=your_password" down
```





